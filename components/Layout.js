import React, { useContext, useState, useEffect, useCallback } from 'react'
import Head from "next/head"
import styles from "../styles/Layout.module.css"
import Link from "next/link"
import{Brightness6Rounded,LanguageRounded} from  '@material-ui/icons'

import { LangContext } from '../pages/_app.js'


import TrLang from '../public/translations/translation.json'




export default function Layout({children,title = "National-Filter"}) {
    const [theme, setTheme] = useState('light')
    const { lang, switchLanguage } = useContext(LangContext)

    useEffect(() => {
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme'))
        if (localStorage.getItem('theme')) {
            setTheme(localStorage.getItem('theme'))
        } else {
            localStorage.setItem('theme', theme)
        }
    }, [])

    const switchTheme = () => {
        if (theme === 'light') {
            saveTheme('dark')
        } else {
            saveTheme('light')
        }
    }

    const saveTheme = (theme) => {
        setTheme(theme)
        localStorage.setItem("theme", theme)
        document.documentElement.setAttribute('data-theme', theme)
    }


    return (
        <div className={styles.container}>
            <Head>
                <title>{title}</title>
                
                <meta charSet="UTF-8"/>
                <meta name="theme-color" content="#252329" />
                <meta name="description" content="   rank countries  by gini index,  population  and other factors"/>
                <meta name="keywords" content="rank, country, infos, stats"/>
                
            </Head>
            <header className={styles.header}>
                <Link href='/'>
                    <svg width="396.1783052828214" height="49.144439240637865" viewBox="0 0 396.1783052828214 49.144439240637865" class="css-1j8o68f"><defs id="SvgjsDefs1098"></defs><g id="SvgjsG1099" featurekey="nameLeftFeature-0" transform="matrix(1.6953841036095676,0,0,1.6953841036095676,-1.1864833782486528,2.370219390951764)" fill="#218AC8"><path d="M13.98 20.2 c-0.32 0 -0.48 -0.16 -0.7 -0.38 l-9.6 -10.36 l0 8.08 c0 1.34 0.78 1.58 1.82 1.84 c0.16 0.04 0.08 0.62 -0.12 0.62 l-4.48 0 c-0.18 0 -0.28 -0.56 -0.12 -0.62 c0.94 -0.26 1.66 -0.5 1.66 -1.84 l0 -7.92 c0 -1.28 -0.14 -2.12 -0.8 -2.86 c-0.12 -0.16 -0.3 -0.28 -0.3 -0.36 c0 -0.16 0.14 -0.4 0.36 -0.4 l1.4 0 c0.22 0 0.36 0.02 0.5 0.18 l9.42 10.28 l0 -8.02 c0 -1.4 -0.88 -1.58 -1.82 -1.82 c-0.16 -0.04 -0.08 -0.62 0.12 -0.62 l4.48 0 c0.18 0 0.28 0.58 0.12 0.62 c-0.9 0.24 -1.68 0.42 -1.68 1.82 l0 7.94 c0 1.26 0.04 2.7 0.24 3.42 c0.1 0.32 -0.26 0.4 -0.5 0.4 z M31.8505 19.36 c0.28 0.04 0.2 0.64 -0.04 0.64 l-4.98 0 c-0.26 0 -0.3 -0.6 -0.06 -0.64 c0.76 -0.12 1.52 -0.42 0.78 -2.16 l-0.3 -0.7 c-0.18 -0.46 -0.62 -0.48 -1.26 -0.48 l-4.16 0 c-0.6 0 -1.04 0.02 -1.22 0.48 l-0.28 0.7 c-0.74 1.78 0.02 2.02 1.02 2.16 c0.24 0.04 0.2 0.64 -0.06 0.64 l-4.22 0 c-0.26 0 -0.32 -0.6 -0.06 -0.64 c0.84 -0.12 1.32 -0.44 2.06 -2.16 l3.38 -7.7 c0.78 -1.76 1.02 -2.64 1.02 -3.4 c0 -0.12 1.42 -0.44 1.48 -0.3 l4.88 11.38 c0.74 1.74 1.22 2.06 2.02 2.18 z M25.9905 15 c0.3 0 0.64 -0.04 0.52 -0.3 l-2.56 -6.08 l-2.56 6.08 c-0.12 0.26 0.2 0.3 0.5 0.3 l4.1 0 z M35.92100000000001 20 c-0.18 0 -0.3 -0.58 -0.14 -0.6 c1.36 -0.16 2.28 -0.46 2.28 -1.54 l0 -10.02 c0 -0.48 -0.16 -0.64 -0.64 -0.64 l-0.64 0 c-2.02 0 -2.92 0.34 -3.38 1.3 c-0.18 0.36 -0.78 0.3 -0.72 0 c0.16 -0.78 0.32 -1.32 0.44 -2.34 c0.04 -0.34 0.28 -0.32 0.62 -0.28 c0.76 0.08 1.76 0.12 5.46 0.12 s5.18 -0.04 5.94 -0.12 c0.36 -0.04 0.7 -0.06 0.58 0.28 c-0.28 0.92 -0.48 1.58 -0.6 2.34 c-0.06 0.34 -0.56 0.32 -0.62 0 c-0.2 -0.94 -1.02 -1.3 -2.8 -1.3 l-0.72 0 c-0.48 0 -0.76 0.16 -0.76 0.64 l0 10.02 c0 1.08 0.94 1.38 2.28 1.54 c0.16 0.02 0.04 0.6 -0.14 0.6 l-6.44 0 z M46.8915 20 c-0.16 0 -0.28 -0.6 -0.12 -0.62 c0.98 -0.14 1.68 -0.5 1.68 -1.8 l0 -9.16 c0 -1.3 -0.7 -1.66 -1.68 -1.8 c-0.16 -0.02 -0.04 -0.62 0.12 -0.62 l5.18 0 c0.16 0 0.28 0.6 0.12 0.62 c-0.86 0.12 -1.66 0.4 -1.66 1.8 l0 9.16 c0 1.4 0.8 1.68 1.66 1.8 c0.16 0.02 0.04 0.62 -0.12 0.62 l-5.18 0 z M60.902 20.32 c-4.16 0 -7.18 -3.1 -7.18 -7.26 c0 -4.02 2.84 -7.38 7.22 -7.38 c4.18 0 7.18 3.1 7.18 7.24 c0 4.04 -2.82 7.4 -7.22 7.4 z M61.641999999999996 19.1 c1.84 0 4.42 -1.18 4.42 -5.14 c0 -4.14 -2.84 -7.06 -5.84 -7.06 c-1.86 0 -4.42 1.18 -4.42 5.12 c0 4.18 2.82 7.08 5.84 7.08 z M82.75250000000001 20.2 c-0.32 0 -0.48 -0.16 -0.7 -0.38 l-9.6 -10.36 l0 8.08 c0 1.34 0.78 1.58 1.82 1.84 c0.16 0.04 0.08 0.62 -0.12 0.62 l-4.48 0 c-0.18 0 -0.28 -0.56 -0.12 -0.62 c0.94 -0.26 1.66 -0.5 1.66 -1.84 l0 -7.92 c0 -1.28 -0.14 -2.12 -0.8 -2.86 c-0.12 -0.16 -0.3 -0.28 -0.3 -0.36 c0 -0.16 0.14 -0.4 0.36 -0.4 l1.4 0 c0.22 0 0.36 0.02 0.5 0.18 l9.42 10.28 l0 -8.02 c0 -1.4 -0.88 -1.58 -1.82 -1.82 c-0.16 -0.04 -0.08 -0.62 0.12 -0.62 l4.48 0 c0.18 0 0.28 0.58 0.12 0.62 c-0.9 0.24 -1.68 0.42 -1.68 1.82 l0 7.94 c0 1.26 0.04 2.7 0.24 3.42 c0.1 0.32 -0.26 0.4 -0.5 0.4 z M100.623 19.36 c0.28 0.04 0.2 0.64 -0.04 0.64 l-4.98 0 c-0.26 0 -0.3 -0.6 -0.06 -0.64 c0.76 -0.12 1.52 -0.42 0.78 -2.16 l-0.3 -0.7 c-0.18 -0.46 -0.62 -0.48 -1.26 -0.48 l-4.16 0 c-0.6 0 -1.04 0.02 -1.22 0.48 l-0.28 0.7 c-0.74 1.78 0.02 2.02 1.02 2.16 c0.24 0.04 0.2 0.64 -0.06 0.64 l-4.22 0 c-0.26 0 -0.32 -0.6 -0.06 -0.64 c0.84 -0.12 1.32 -0.44 2.06 -2.16 l3.38 -7.7 c0.78 -1.76 1.02 -2.64 1.02 -3.4 c0 -0.12 1.42 -0.44 1.48 -0.3 l4.88 11.38 c0.74 1.74 1.22 2.06 2.02 2.18 z M94.763 15 c0.3 0 0.64 -0.04 0.52 -0.3 l-2.56 -6.08 l-2.56 6.08 c-0.12 0.26 0.2 0.3 0.5 0.3 l4.1 0 z M101.5535 20.04 c-0.2 0.02 -0.28 -0.6 -0.12 -0.64 c1.18 -0.3 2.08 -0.48 2.08 -1.96 l0 -9.02 c0 -1.4 -0.82 -1.68 -1.7 -1.8 c-0.16 -0.02 -0.04 -0.62 0.1 -0.62 l5.22 0 c0.16 0 0.26 0.6 0.12 0.62 c-0.86 0.1 -1.66 0.4 -1.66 1.8 l0 9.02 c0 1.16 0.52 1.54 2.24 1.54 c3.24 0 4.28 -1.3 4.78 -2.14 c0.16 -0.26 0.64 -0.2 0.64 0.18 c0 1.1 -0.84 3 -2.06 3.02 c-0.96 -0.06 -2.24 -0.12 -3.96 -0.12 c-1.84 0 -3.84 -0.06 -5.68 0.12 z"></path></g><g id="SvgjsG1100" featurekey="inlineSymbolFeature-0" transform="matrix(0.5796702046265994,0,0,0.5796702046265994,202.304946930601,-4.411290334602743)" fill="#218AC8"><title xmlns="http://www.w3.org/2000/svg">Bigdark_v2</title><path xmlns="http://www.w3.org/2000/svg" d="M50,71.66c14,0,26.39-2.28,35-6V84.64h0c-0.26,4.28-15.82,7.75-35,7.75s-34.64-3.45-35-7.72a0,0,0,0,0,0,0v-19C23.61,69.39,36,71.66,50,71.66Zm0-48.31c19.33,0,35-3.53,35-7.88S69.33,7.61,50,7.61s-35,3.53-35,7.87S30.67,23.36,50,23.36ZM15,43.42v19c0.61,0.28,1.24.57,1.91,0.83S18.29,63.78,19,64c8,2.9,19,4.72,31,4.72S73,66.95,81,64c0.71-.26,1.43-0.52,2.09-0.81s1.31-.55,1.92-0.84v-19c-8.61,3.69-21,6-35,6S23.61,47.12,15,43.42Zm0-22.25v19q0.89,0.41,1.89.83c0.66,0.28,1.36.55,2.09,0.81,8,2.89,19.05,4.7,31,4.7s23-1.81,31-4.7c0.73-.26,1.43-0.54,2.09-0.81s1.29-.55,1.91-0.84v-19c-8.61,3.69-21,6-35,6S23.61,24.87,15,21.17Z"></path></g><g id="SvgjsG1101" featurekey="nameRightFeature-0" transform="matrix(1.7177740258919356,0,0,1.7177740258919356,265.222720979602,1.9363561539789966)" fill="#218AC8"><path d="M4.1505 20.04 c-0.2 0.02 -0.28 -0.6 -0.12 -0.64 c1.18 -0.3 2.08 -0.48 2.08 -1.96 l0 -8.96 c0 -1.34 -0.82 -1.68 -1.7 -1.9 c-0.16 -0.04 -0.08 -0.64 0.12 -0.62 c1.46 0.12 3.6 0.12 5.08 0.12 c1.82 0 3.18 -0.08 4.76 -0.12 c0.46 0 0.46 0.32 0.36 0.76 l-0.5 1.9 c-0.06 0.26 -0.54 0.26 -0.62 0 c-0.28 -0.94 -0.92 -1.6 -3.46 -1.6 c-1.5 0 -1.96 0.36 -1.96 1.46 l0 3.52 c0 0.52 0.26 0.62 0.66 0.62 l0.38 0 c1.78 0 3.12 -0.12 4 -0.96 c0.18 -0.18 0.6 -0.14 0.44 0.24 l-1.18 2.52 c-0.14 0.34 -0.42 0.3 -0.64 0 c-0.48 -0.62 -1.52 -0.86 -2.78 -0.86 l-0.22 0 c-0.4 0 -0.66 0.1 -0.66 0.62 l0 3.26 c0 1.48 0.96 1.64 2.56 1.96 c0.18 0.04 0.08 0.66 -0.12 0.64 c-1.32 -0.12 -2.44 -0.12 -3.48 -0.12 s-2.04 0.02 -3 0.12 z M16.241 20 c-0.16 0 -0.28 -0.6 -0.12 -0.62 c0.98 -0.14 1.68 -0.5 1.68 -1.8 l0 -9.16 c0 -1.3 -0.7 -1.66 -1.68 -1.8 c-0.16 -0.02 -0.04 -0.62 0.12 -0.62 l5.18 0 c0.16 0 0.28 0.6 0.12 0.62 c-0.86 0.12 -1.66 0.4 -1.66 1.8 l0 9.16 c0 1.4 0.8 1.68 1.66 1.8 c0.16 0.02 0.04 0.62 -0.12 0.62 l-5.18 0 z M22.671499999999998 20.04 c-0.2 0.02 -0.28 -0.6 -0.12 -0.64 c1.18 -0.3 2.08 -0.48 2.08 -1.96 l0 -9.02 c0 -1.4 -0.82 -1.68 -1.7 -1.8 c-0.16 -0.02 -0.04 -0.62 0.1 -0.62 l5.22 0 c0.16 0 0.26 0.6 0.12 0.62 c-0.86 0.1 -1.66 0.4 -1.66 1.8 l0 9.02 c0 1.16 0.52 1.54 2.24 1.54 c3.24 0 4.28 -1.3 4.78 -2.14 c0.16 -0.26 0.64 -0.2 0.64 0.18 c0 1.1 -0.84 3 -2.06 3.02 c-0.96 -0.06 -2.24 -0.12 -3.96 -0.12 c-1.84 0 -3.84 -0.06 -5.68 0.12 z M38.361999999999995 20 c-0.18 0 -0.3 -0.58 -0.14 -0.6 c1.36 -0.16 2.28 -0.46 2.28 -1.54 l0 -10.02 c0 -0.48 -0.16 -0.64 -0.64 -0.64 l-0.64 0 c-2.02 0 -2.92 0.34 -3.38 1.3 c-0.18 0.36 -0.78 0.3 -0.72 0 c0.16 -0.78 0.32 -1.32 0.44 -2.34 c0.04 -0.34 0.28 -0.32 0.62 -0.28 c0.76 0.08 1.76 0.12 5.46 0.12 s5.18 -0.04 5.94 -0.12 c0.36 -0.04 0.7 -0.06 0.58 0.28 c-0.28 0.92 -0.48 1.58 -0.6 2.34 c-0.06 0.34 -0.56 0.32 -0.62 0 c-0.2 -0.94 -1.02 -1.3 -2.8 -1.3 l-0.72 0 c-0.48 0 -0.76 0.16 -0.76 0.64 l0 10.02 c0 1.08 0.94 1.38 2.28 1.54 c0.16 0.02 0.04 0.6 -0.14 0.6 l-6.44 0 z M49.0325 20.04 c-0.2 0.02 -0.28 -0.6 -0.12 -0.64 c1.18 -0.3 2.08 -0.48 2.08 -1.96 l0 -8.96 c0 -1.34 -0.82 -1.68 -1.7 -1.9 c-0.16 -0.04 -0.08 -0.64 0.12 -0.62 c1.46 0.12 3.6 0.12 5.08 0.12 c1.82 0 3.18 -0.08 4.76 -0.12 c0.46 0 0.46 0.32 0.36 0.76 l-0.5 1.9 c-0.06 0.26 -0.54 0.26 -0.62 0 c-0.28 -0.94 -0.92 -1.6 -3.46 -1.6 c-1.5 0 -1.96 0.36 -1.96 1.46 l0 3.32 c0 0.52 0.26 0.62 0.66 0.62 l0.38 0 c1.78 0 3.12 -0.12 4 -0.96 c0.18 -0.18 0.6 -0.14 0.44 0.24 l-1.18 2.52 c-0.14 0.34 -0.42 0.3 -0.64 0 c-0.48 -0.62 -1.52 -0.86 -2.78 -0.86 l-0.22 0 c-0.4 0 -0.66 0.1 -0.66 0.62 l0 3.46 c0 1.16 0.52 1.54 2.24 1.54 c3.24 0 4.28 -1.3 4.78 -2.14 c0.16 -0.26 0.64 -0.2 0.64 0.18 c0 1.1 -0.84 3 -2.06 3.02 c-0.96 -0.06 -2.24 -0.12 -3.96 -0.12 c-1.84 0 -3.84 -0.06 -5.68 0.12 z M76.12299999999999 19.54 c0.16 0 0.14 0.5 0 0.56 c-1.12 0.42 -2.78 0.28 -3.88 -1.14 l-3.12 -4 c-0.84 -1.08 -1.94 -1.28 -3.4 -1.3 l0 3.92 c0 1.4 0.92 1.64 2.26 1.8 c0.14 0.02 0.04 0.62 -0.12 0.62 l-5.78 0 c-0.16 0 -0.28 -0.6 -0.12 -0.62 c0.98 -0.14 1.68 -0.5 1.68 -1.8 l0 -9.04 c0 -1.32 -0.7 -1.7 -1.68 -1.96 c-0.16 -0.04 -0.06 -0.64 0.12 -0.62 c0.8 0.1 1.68 0.12 2.28 0.12 c1.34 0 2.62 -0.12 3.54 -0.12 c2.86 0 4.96 1.2 4.96 3.7 c0 2.38 -1.98 3.52 -3.5 3.62 l0 0.1 c0.74 0 1.24 0.32 2.08 1.38 l3.08 3.84 c0.56 0.72 1.1 0.94 1.6 0.94 z M66.343 12.8 c3 0 4.32 -0.52 4.32 -2.62 c0 -2.18 -1.44 -3.26 -3.28 -3.26 c-1.22 0 -1.66 0.48 -1.66 1.62 l0 4.26 l0.62 0 z"></path></g></svg>
                </Link>

                <button className={styles.theme_switcher} onClick={switchTheme} title ={TrLang['switch_theme'][lang]} >
                    <Brightness6Rounded style={{ fontSize: '1.5rem' }}/>
                </button>

            <button className={styles.language_switcher} onClick={switchLanguage} title ={TrLang['switch_language'][lang]}>
                <LanguageRounded style={{ fontSize: '1.5rem' }}/>
            </button>

            </header>
            <main className={styles.main}>{children}</main>
            <footer className={styles.footer}> </footer>
        </div>
    )
}
